{"ast":null,"code":"import _ from 'lodash';\nimport { NavigationActions, StackActions } from 'react-navigation';\nimport * as ActionConst from \"./ActionConst\";\nimport { getActiveState, popPrevious } from \"./State\";\nexport default function createReducer() {\n  return function (state, action) {\n    var navigationStore = require(\"./navigationStore\").default;\n    var type = action.type,\n      routeName = action.routeName;\n    if (type === ActionConst.POP_TO) {\n      var nextScene = '';\n      var newState = state;\n      var currentState = state;\n      while (newState && nextScene !== routeName) {\n        newState = navigationStore.getStateForAction(StackActions.pop(), currentState);\n        if (newState) {\n          nextScene = getActiveState(newState).routeName;\n          if (nextScene !== routeName && _.isEqual(currentState, newState)) {\n            console.warn(\"popTo called with an unknown routeName: \" + routeName + \", current scene: \" + nextScene);\n            break;\n          }\n          if (nextScene !== routeName) {\n            currentState = newState;\n          }\n        }\n      }\n      return nextScene === routeName ? newState : state;\n    }\n    if (type === ActionConst.REPLACE) {\n      var _newState = navigationStore.getStateForAction(NavigationActions.navigate({\n        routeName: routeName,\n        params: action.params\n      }), state);\n      var res = popPrevious(_newState, routeName);\n      return res;\n    }\n    return navigationStore.getStateForAction(action, state) || state;\n  };\n}","map":{"version":3,"names":["_","NavigationActions","StackActions","ActionConst","getActiveState","popPrevious","createReducer","state","action","navigationStore","require","default","type","routeName","POP_TO","nextScene","newState","currentState","getStateForAction","pop","isEqual","console","warn","REPLACE","navigate","params","res"],"sources":["C:/Users/adamk/Downloads/kasino9/node_modules/react-native-router-flux/src/Reducer.js"],"sourcesContent":["import _ from 'lodash';\nimport { NavigationActions, StackActions } from 'react-navigation';\nimport * as ActionConst from './ActionConst';\nimport { getActiveState, popPrevious } from './State';\n\nexport default function createReducer() {\n  return (state, action) => {\n    const navigationStore = require('./navigationStore').default;\n    const { type, routeName } = action;\n    if (type === ActionConst.POP_TO) {\n      let nextScene = '';\n      let newState = state;\n      let currentState = state;\n      while (newState && nextScene !== routeName) {\n        newState = navigationStore.getStateForAction(StackActions.pop(), currentState);\n        if (newState) {\n          nextScene = getActiveState(newState).routeName;\n          if (nextScene !== routeName && _.isEqual(currentState, newState)) {\n            console.warn(`popTo called with an unknown routeName: ${routeName}, current scene: ${nextScene}`);\n            break;\n          }\n          if (nextScene !== routeName) {\n            currentState = newState;\n          }\n        }\n      }\n      return nextScene === routeName ? newState : state;\n    }\n    if (type === ActionConst.REPLACE) {\n      const newState = navigationStore.getStateForAction(\n        NavigationActions.navigate({\n          routeName,\n          params: action.params,\n        }),\n        state,\n      );\n      const res = popPrevious(newState, routeName);\n      return res;\n    }\n    return navigationStore.getStateForAction(action, state) || state;\n  };\n}\n"],"mappings":"AAAA,OAAOA,CAAC,MAAM,QAAQ;AACtB,SAASC,iBAAiB,EAAEC,YAAY,QAAQ,kBAAkB;AAClE,OAAO,KAAKC,WAAW;AACvB,SAASC,cAAc,EAAEC,WAAW;AAEpC,eAAe,SAASC,aAAaA,CAAA,EAAG;EACtC,OAAO,UAACC,KAAK,EAAEC,MAAM,EAAK;IACxB,IAAMC,eAAe,GAAGC,OAAO,oBAAoB,CAAC,CAACC,OAAO;IAAC,IACrDC,IAAI,GAAgBJ,MAAM,CAA1BI,IAAI;MAAEC,SAAS,GAAKL,MAAM,CAApBK,SAAS;IACvB,IAAID,IAAI,KAAKT,WAAW,CAACW,MAAM,EAAE;MAC/B,IAAIC,SAAS,GAAG,EAAE;MAClB,IAAIC,QAAQ,GAAGT,KAAK;MACpB,IAAIU,YAAY,GAAGV,KAAK;MACxB,OAAOS,QAAQ,IAAID,SAAS,KAAKF,SAAS,EAAE;QAC1CG,QAAQ,GAAGP,eAAe,CAACS,iBAAiB,CAAChB,YAAY,CAACiB,GAAG,CAAC,CAAC,EAAEF,YAAY,CAAC;QAC9E,IAAID,QAAQ,EAAE;UACZD,SAAS,GAAGX,cAAc,CAACY,QAAQ,CAAC,CAACH,SAAS;UAC9C,IAAIE,SAAS,KAAKF,SAAS,IAAIb,CAAC,CAACoB,OAAO,CAACH,YAAY,EAAED,QAAQ,CAAC,EAAE;YAChEK,OAAO,CAACC,IAAI,8CAA4CT,SAAS,yBAAoBE,SAAW,CAAC;YACjG;UACF;UACA,IAAIA,SAAS,KAAKF,SAAS,EAAE;YAC3BI,YAAY,GAAGD,QAAQ;UACzB;QACF;MACF;MACA,OAAOD,SAAS,KAAKF,SAAS,GAAGG,QAAQ,GAAGT,KAAK;IACnD;IACA,IAAIK,IAAI,KAAKT,WAAW,CAACoB,OAAO,EAAE;MAChC,IAAMP,SAAQ,GAAGP,eAAe,CAACS,iBAAiB,CAChDjB,iBAAiB,CAACuB,QAAQ,CAAC;QACzBX,SAAS,EAATA,SAAS;QACTY,MAAM,EAAEjB,MAAM,CAACiB;MACjB,CAAC,CAAC,EACFlB,KACF,CAAC;MACD,IAAMmB,GAAG,GAAGrB,WAAW,CAACW,SAAQ,EAAEH,SAAS,CAAC;MAC5C,OAAOa,GAAG;IACZ;IACA,OAAOjB,eAAe,CAACS,iBAAiB,CAACV,MAAM,EAAED,KAAK,CAAC,IAAIA,KAAK;EAClE,CAAC;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}